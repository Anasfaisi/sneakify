<%- include("partials/header") %>

<style>
.container-fluid {
  display: flex;
  gap: 1px;
  flex-wrap: nowrap;
  padding: 30px;
}

aside {
  flex: 0 0 280px;
  border-right: 1px solid #ddd;
  padding-right: 15px;
}

aside h5, aside h6 {
  color: #333;
}

main {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.sort-container {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.sort-container select {
  margin-left: 10px;
}

.product-list {
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  justify-content: space-between;
}

.product-card {
  width: calc(33.333% - 20px);
  margin-bottom: 30px;
}

.card {
  transition: transform 0.2s ease-in-out;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.card:hover {
  transform: scale(1.05);
}

.card-title {
  font-size: 1.1rem;
  font-weight: 600;
}

.card-text {
  font-size: 0.9rem;
  color: #666;
}

@media (max-width: 768px) {
  .product-card {
    width: 48%;
  }

  .product-list {
    justify-content: flex-start;
  }

  aside {
    max-width: 100%;
    flex: 0 0 100%;
  }

  main {
    flex: 0 0 100%;
  }
}

@media (max-width: 480px) {
  .product-card {
    width: 100%;
  }
}

</style>

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    <li class="breadcrumb-item"><a href="/users/shop">Shop</a></li>
  </ol>
</nav>
<div class="container-fluid">
    <aside class="col-md-3">
      <h5 class="fw-bold mb-3">Filters</h5>
      <form id="filter-form">
        <div class="mb-4">
          <h6 class="fw-bold">Size</h6>
          <div>
            <input type="checkbox" id="size-7" name="size" value="7">
            <label for="size-7">7</label>
          </div>
          <div>
            <input type="checkbox" id="size-8" name="size" value="8">
            <label for="size-8">8</label>
          </div>
          <div>
            <input type="checkbox" id="size-9" name="size" value="9">
            <label for="size-9">9</label>
          </div>
        </div>
        <div class="mb-4">
          <h6 class="fw-bold">Color</h6>
          <div>
            <input type="checkbox" id="color-red" name="color" value="Red">
            <label for="color-red">Red</label>
          </div>
          <div>
            <input type="checkbox" id="color-blue" name="color" value="Blue">
            <label for="color-blue">Blue</label>
          </div>
          <div>
            <input type="checkbox" id="color-black" name="color" value="Black">
            <label for="color-black">Black</label>
          </div>
        </div>
        <div class="mb-4">
          <h6 class="fw-bold">Brand</h6>
          <div>
            <input type="checkbox" id="brand-nike" name="brand" value="Nike">
            <label for="brand-nike">Nike</label>
          </div>
          <div>
            <input type="checkbox" id="brand-adidas" name="brand" value="Adidas">
            <label for="brand-adidas">Adidas</label>
          </div>
        </div>
        <div class="mb-4">
          <h6 class="fw-bold">Gender</h6>
          <div>
            <input type="checkbox" id="gender-male" name="gender" value="Male">
            <label for="gender-male">Male</label>
          </div>
          <div>
            <input type="checkbox" id="gender-female" name="gender" value="Female">
            <label for="gender-female">Female</label>
          </div>
        </div>
        <div class="mb-4">
          <h6 class="fw-bold">Category</h6>
          <div>
            <input type="checkbox" id="category-sneakers" name="category" value="Sneakers">
            <label for="category-sneakers">Sneakers</label>
          </div>
          <div>
            <input type="checkbox" id="category-sports" name="category" value="Sports">
            <label for="category-sports">Sports</label>
          </div>
        </div>
        <button type="submit" class="btn btn-primary w-100">Apply Filters</button>
      </form>
    </aside>
    <main class="col-md-9">
      <div class="sort-container">
        <h6 class="fw-bold">Sort By</h6>
        <select id="sort" name="sort" class="form-select">
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
          <option value="rating">Average Rating</option>
          <option value="featured">Featured</option>
          <option value="new-arrivals">New Arrivals</option>
          <option value="a-z">A - Z</option>
          <option value="z-a">Z - A</option>
        </select>
      </div>
      <div class="product-list d-flex flex-wrap gap-4">
        <% if (products.length > 0) { %>
          <% products.forEach(product => { %>
            <div class="product-card card shadow-sm">
              <a href="/users/productDetails/<%= product._id %>" class="text-decoration-none text-dark">
                <img src="/<%= product.images[0] %>" alt="<%= product.name %>" class="card-img-top product-image">
                <div class="card-body">
                  <h2 class="card-title product-name"><%= product.name %></h2>
                  <p class="card-text product-description"><%= product.description %></p>
                  <p class="card-text product-price">$<%= product.price.toFixed(2) %></p>
                  <div class="product-sizes">
                   
                  </div>
                </div>
              </a>
            </div>
          <% }); %>
        <% } else { %>
          <p>No products available at the moment. Please check back later!</p>
        <% } %>
      </div>
    </main>
  </div>
  <script>
    document.getElementById('filter-form').addEventListener('submit', function(e) {
      e.preventDefault();
  
      const form = e.target;
      const formData = new FormData(form);
  
      
      const queryParams = new URLSearchParams();
      formData.forEach((value, key) => {
        if (key === 'size') {
          
          queryParams.append(key, value);
        } else {
          queryParams.append(key, value);
        }
      });
  
      
      const sortValue = document.getElementById('sort').value;
      queryParams.append('sort', sortValue);
  
      
      window.location.href = `/users/shop?${queryParams.toString()}`;
    });
  </script>
  <%- include("partials/footer") %>

  
  