<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You for Your Order!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="text-center">
            <h1 class="text-success">Thank You for Your Order!</h1>
            <p class="lead">Your order has been placed successfully.</p>
            <p>Order ID: <strong><%= order._id %></strong></p>
            <p>Order Date: <strong><%= new Date(order.orderDate).toLocaleString('en-IN', { 
                dateStyle: 'medium', timeStyle: 'short' }) %></strong></p>
        </div>

        <hr class="my-4">

        <!-- Customer Details -->
        <h3>Shipping Details</h3>
        <div class="border rounded p-3 mb-4">
            <p><strong><%= order.customer.firstName %> <%= order.customer.lastName %></strong></p>
            <p><%= order.customer.address %>, <%= order.customer.city %>, <%= order.customer.state %>, <%= order.customer.pincode %></p>
            <p><%= order.customer.country %></p>
            <p>Phone: <%= order.customer.phone %></p>
        </div>

        <!-- Order Details -->
        <h3>Order Summary</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Size</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <% order.products.forEach(product => { %>
                    <tr>
                        <td><%= product.name %></td>
                        <td><%= product.size %></td>
                        <td><%= product.quantity %></td>
                        <td>₹<%= product.price %></td>
                        <td>₹<%= product.total %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>

        <!-- Payment and Total -->
        <div class="row mt-4">
            <div class="col-md-6">
                <h4>Payment Method</h4>
                <p><%= order.paymentMethod === 'cashOnDelivery' ? 'Cash on Delivery' : 'Online Payment' %></p>
            </div>
            <div class="col-md-6 text-end">
                <h4>Order Totals</h4>
                <p>Items Total: ₹<%= order.totalAmount %></p>
                <p>Shipping: ₹<%= order.shippingCharge %> 
                    <% if (order.shippingCharge === 0) { %>
                        <span class="text-success">(Free)</span>
                    <% } %>
                </p>
                <h4 class="fw-bold">Grand Total: ₹<%= order.grandTotal %></h4>
            </div>
        </div>

        <!-- Thank You Note -->
        <div class="text-center mt-5">
            <a href="/" class="btn btn-primary">Continue Shopping</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
